= use ansible 
Nick Hardiman
:source-highlighter: highlight.js
:revdate: 16-03-2021


The command line tool

[source,shell]
----
[nick@guest1 0 ~]$ ansible all --list-hosts
  hosts (5):
    inv_host1.lab.example.com
    inv_host2.lab.example.com
    inv_host3.lab.example.com
[nick@guest1 0 ~]$ 
----

The setup module 

[source,shell]
----
(openstack-venv) [root@workstation-b899 nextgen_ansible_advanced_homework]# ansible -m setup localhost
localhost | SUCCESS => {
    "ansible_facts": {
        "ansible_all_ipv4_addresses": [
            "192.0.2.252"
        ],

...(hundreds of lines)...

        "module_setup": true
    },
    "changed": false
}
(openstack-venv) [root@workstation-b899 nextgen_ansible_advanced_homework]# 
----

The debug module and hostvars 

[source,shell]
----
(openstack-venv) [root@workstation-b899 nextgen_ansible_advanced_homework]# ansible -m debug -a "var=hostvars[inventory_hostname]" localhost 
localhost | SUCCESS => {
    "hostvars[inventory_hostname]": {
        "ansible_check_mode": false,
        "ansible_connection": "local",
        "ansible_diff_mode": false,
        "ansible_facts": {},
        "ansible_forks": 5,
        "ansible_inventory_sources": [
            "/root/nextgen_ansible_advanced_homework/hosts"
        ],
        "ansible_playbook_python": "/usr/libexec/platform-python",
        "ansible_python_interpreter": "/usr/libexec/platform-python",
        "ansible_verbosity": 0,
        "ansible_version": {
            "full": "2.9.7",
            "major": 2,
            "minor": 9,
            "revision": 7,
            "string": "2.9.7"
        },
        "group_names": [],
        "groups": {
            "all": [],
            "ungrouped": []
        },
        "inventory_hostname": "localhost",
        "inventory_hostname_short": "localhost",
        "omit": "__omit_place_holder__ea7dc7397eef814b9c9172462ad8058718869c6d",
        "playbook_dir": "/root/nextgen_ansible_advanced_homework",
        "tower_password": "7WImAtWRPbix",
        "tower_username": "admin",
        "vault_tower_password": "7WImAtWRPbix"
    }
}
(openstack-venv) [root@workstation-b899 nextgen_ansible_advanced_homework]# 
----